import{P as ci}from"./PinturaEditor-DuqWQUZl.js";import{h as ui,y as di,R as mi,f as fi,e as pi}from"./pintura-BMqhf0QJ.js";import{bO as hi,u as Fn,v as ge,t as $i,H as Rn,I as gi,ar as vi,aX as bi,F as yi,aK as In}from"./index-BAi-_Ng5.js";/*!
* Pintura Video Extension v1.16.3 - Test version
* (c) 2018-2025 Pintura Labs B.V. - All Rights Reserved
* License: https://pqina.nl/pintura/license/
*
* This version of the Pintura Video Extension is for testing purposes only.
* Visit https://pqina.nl/pintura/ to obtain a commercial license.
*/const ur=t=>typeof t=="function";let Ye=null;const Qt=()=>(Ye===null&&(Ye=typeof window<"u"&&typeof window.document<"u"),Ye),pn=t=>Qt()?RegExp(t).test(window.navigator.userAgent):void 0;let Je=null;const wi=()=>(Je===null&&(Je=pn(/Android/)),Je),Ue=t=>typeof t=="string";function dr(t,e){e.split(";").forEach(n=>{const[i,r]=n.split(":");if(!i.length||!r)return;const[o,a]=r.split("!important");t.style.setProperty(i,o,Ue(a)?"important":void 0)})}const xi=(t,e,n=[])=>{const i=document.createElement(t),r=Object.getOwnPropertyDescriptors(i.__proto__);for(const o in e)o==="style"?dr(i,e[o]):r[o]&&r[o].set||/textContent|innerHTML/.test(o)||typeof e[o]=="function"?i[o]=e[o]:i.setAttribute(o,e[o]);return n.forEach(o=>i.appendChild(o)),i},mr=t=>{t.width=1,t.height=1;const e=t.getContext("2d");e&&e.clearRect(0,0,1,1)},Mi=()=>Math.random().toString(36).substring(2,9);let We=null;const ye=()=>(We===null&&(We=pn(/Firefox/)),We),zn="__pqina_webapi__",fr=t=>window[zn]?window[zn][t]:window[t],Ei={matroska:"mkv"},pr=t=>{const e=(t.match(/\/([a-z0-9]+)/)||[])[1];if(/^x/.test(e)){const[,n=""]=t.split("/x-");return Ei[n]}return e},Pi=t=>t.substring(0,t.lastIndexOf("."))||t,Si=t=>t.split(".").pop(),Ci=/avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/,ki=t=>Ci.test(t)?"image/"+(/jfif|jif|jpe|jpg/.test(t)?"jpeg":t==="svg"?"svg+xml":t):"",Bi=t=>t&&ki(Si(t).toLowerCase()),Li=(t,e)=>{const n=Bi(t);if(n===e)return t;const i=pr(e)||n;return`${Pi(t)}.${i}`},Ti=(t,e,n)=>{const i=new Date().getTime(),r=t.type.length&&!/null|text/.test(t.type),o=r?t.type:n,a=Li(e,o);try{return new(fr("File"))([t],a,{lastModified:i,type:r?t.type:o})}catch{const l=r?t.slice():t.slice(0,t.size,o);return l.lastModified=i,l.name=a,l}},_n=t=>t,It=(t,e=12)=>parseFloat(t.toFixed(e)),Ai=()=>Ut(0,0),Ut=(t,e)=>({x:t,y:e}),Fi=t=>Ut(t.width,t.height),Un=t=>Ut(t.x,t.y),Ri=t=>(t.x=-t.x,t.y=-t.y,t),hr=(t,e,n=Ai())=>{const i=Math.cos(e),r=Math.sin(e),o=t.x-n.x,a=t.y-n.y;return t.x=n.x+i*o-r*a,t.y=n.y+r*o+i*a,t},Ii=(t,e)=>(t.x=e(t.x),t.y=e(t.y),t),zi=(t,e)=>(t.x+=e.x,t.y+=e.y,t),$r=(t,e)=>(t.x-=e.x,t.y-=e.y,t),hn=(t,e,n,i)=>({x:t,y:e,width:n,height:i}),gr=t=>hn(0,0,t.width,t.height),_i=t=>{let e=t[0].x,n=t[0].x,i=t[0].y,r=t[0].y;return t.forEach(o=>{e=Math.min(e,o.x),n=Math.max(n,o.x),i=Math.min(i,o.y),r=Math.max(r,o.y)}),hn(e,i,n-e,r-i)},Ui=(t,e,n,i)=>hn(t,e,n,i),oe=t=>Ut(t.x+t.width*.5,t.y+t.height*.5),ji=(t,e,n)=>(n||(n=oe(t)),Ni(t).map(i=>hr(i,e,n))),Ni=t=>[Ut(t.x,t.y),Ut(t.x+t.width,t.y),Ut(t.x+t.width,t.y+t.height),Ut(t.x,t.y+t.height)],Di=t=>(t.x=0,t.y=0,t);Qt()&&Node.prototype.replaceChildren;Qt()&&xi("div",{class:"PinturaMeasure",style:"position:absolute;left:0;top:0;width:99999px;height:0;pointer-events:none;contain:strict;margin:0;padding:0;"});let tn=null;const vr=()=>(tn===null&&(tn=Qt()&&/^((?!chrome|android).)*(safari|iphone|ipad)/i.test(navigator.userAgent)),tn),jn=(t=0,e=!0)=>new(fr("ProgressEvent"))("progress",{loaded:t*100,total:100,lengthComputable:e}),kt=(...t)=>{},Oi=(t,e)=>{const{headers:n={},credentials:i}=e||{};Object.entries(n).forEach(([r,o])=>t.setRequestHeader(r,o)),i&&(t.withCredentials=i!=="omit")};let en=null;const Vi=()=>(en===null&&(en=Qt()&&/^mac/i.test(navigator.platform)),en);let nn=null;const sn=()=>(nn===null&&(nn=Qt()&&(pn(/iPhone|iPad|iPod/)||Vi()&&navigator.maxTouchPoints>=1)),nn),Ki=t=>typeof t=="object"&&t.constructor==Object,Xi=t=>Ki(t)?JSON.stringify(t):t,Hi=(t,e,n)=>new Promise((i,r)=>{const{token:o={},beforeSend:a=kt,onprogress:l=kt}=n;o.cancel=()=>c.abort();const c=new XMLHttpRequest;c.upload.onprogress=l,c.onload=()=>c.status>=200&&c.status<300?i(c):r(c),c.onerror=()=>r(c),c.ontimeout=()=>r(c),c.open("POST",encodeURI(t)),a(c),c.send(e instanceof FormData?e:e.reduce((s,u)=>(s.append(...u.map(Xi)),s),new FormData))}),je=t=>typeof t=="number",Zi=t=>Array.isArray(t);function $t(){}function we(t,e){for(const n in e)t[n]=e[n];return t}function br(t){return t()}function Nn(){return Object.create(null)}function Mt(t){t.forEach(br)}function Kt(t){return typeof t=="function"}function Bt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function qi(t){return Object.keys(t).length===0}function Ne(t,...e){if(t==null)return $t;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function lt(t,e,n){t.$$.on_destroy.push(Ne(e,n))}function Ht(t,e,n,i){if(t){const r=yr(t,e,n,i);return t[0](r)}}function yr(t,e,n,i){return t[1]&&i?we(n.ctx.slice(),t[1](i(e))):n.ctx}function Zt(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],a=Math.max(e.dirty.length,r.length);for(let l=0;l<a;l+=1)o[l]=e.dirty[l]|r[l];return o}return e.dirty|r}return e.dirty}function qt(t,e,n,i,r,o){if(r){const a=yr(e,n,i,o);t.p(a,r)}}function Gt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function Dn(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function Nt(t){return t&&Kt(t.destroy)?t.destroy:$t}const Gi=typeof window<"u";let wr=Gi?t=>requestAnimationFrame(t):$t;const ae=new Set;function xr(t){ae.forEach(e=>{e.c(t)||(ae.delete(e),e.f())}),ae.size!==0&&wr(xr)}function Qi(t){let e;return ae.size===0&&wr(xr),{promise:new Promise(n=>{ae.add(e={c:t,f:n})}),abort(){ae.delete(e)}}}const Yi=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function _(t,e){t.appendChild(e)}function et(t,e,n){t.insertBefore(e,n||null)}function W(t){t.parentNode&&t.parentNode.removeChild(t)}function Mr(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function G(t){return document.createElement(t)}function Oe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function xt(t){return document.createTextNode(t)}function ct(){return xt(" ")}function Er(){return xt("")}function vt(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ji(t){return Array.from(t.childNodes)}function De(t,e){e=""+e,t.data!==e&&(t.data=e)}function ht(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function Wi(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,i,e),r}class to{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=Oe(n.nodeName):this.e=G(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)et(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(W)}}let xe;function ve(t){xe=t}function Ve(){if(!xe)throw new Error("Function called outside component initialization");return xe}function eo(t){Ve().$$.on_mount.push(t)}function no(){const t=Ve();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=Wi(e,n,{cancelable:i});return r.slice().forEach(a=>{a.call(t,o)}),!o.defaultPrevented}return!0}}function Rt(t){return Ve().$$.context.get(t)}function ro(){return Ve().$$.context}function $n(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const ie=[],jt=[];let se=[];const ln=[],io=Promise.resolve();let cn=!1;function oo(){cn||(cn=!0,io.then(yt))}function un(t){se.push(t)}function ao(t){ln.push(t)}const rn=new Set;let ee=0;function yt(){if(ee!==0)return;const t=xe;do{try{for(;ee<ie.length;){const e=ie[ee];ee++,ve(e),so(e.$$)}}catch(e){throw ie.length=0,ee=0,e}for(ve(null),ie.length=0,ee=0;jt.length;)jt.pop()();for(let e=0;e<se.length;e+=1){const n=se[e];rn.has(n)||(rn.add(n),n())}se.length=0}while(ie.length);for(;ln.length;)ln.pop()();cn=!1,rn.clear(),ve(t)}function so(t){if(t.fragment!==null){t.update(),Mt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(un)}}function lo(t){const e=[],n=[];se.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),se=e}const _e=new Set;let Xt;function le(){Xt={r:0,c:[],p:Xt}}function ce(){Xt.r||Mt(Xt.c),Xt=Xt.p}function K(t,e){t&&t.i&&(_e.delete(t),t.i(e))}function Y(t,e,n,i){if(t&&t.o){if(_e.has(t))return;_e.add(t),Xt.c.push(()=>{_e.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function On(t,e){const n={},i={},r={$$scope:1};let o=t.length;for(;o--;){const a=t[o],l=e[o];if(l){for(const c in a)c in l||(i[c]=1);for(const c in l)r[c]||(n[c]=l[c],r[c]=1);t[o]=l}else for(const c in a)r[c]=1}for(const a in i)a in n||(n[a]=void 0);return n}function ze(t){return typeof t=="object"&&t!==null?t:{}}function co(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function St(t){t&&t.c()}function Et(t,e,n,i){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),i||un(()=>{const a=t.$$.on_mount.map(br).filter(Kt);t.$$.on_destroy?t.$$.on_destroy.push(...a):Mt(a),t.$$.on_mount=[]}),o.forEach(un)}function Pt(t,e){const n=t.$$;n.fragment!==null&&(lo(n.after_update),Mt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function uo(t,e){t.$$.dirty[0]===-1&&(ie.push(t),oo(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function zt(t,e,n,i,r,o,a,l=[-1]){const c=xe;ve(t);const s=t.$$={fragment:null,ctx:[],props:o,update:$t,not_equal:r,bound:Nn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Nn(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};a&&a(s.root);let u=!1;if(s.ctx=n?n(t,e.props||{},(f,g,...m)=>{const h=m.length?m[0]:g;return s.ctx&&r(s.ctx[f],s.ctx[f]=h)&&(!s.skip_bound&&s.bound[f]&&s.bound[f](h),u&&uo(t,f)),g}):[],s.update(),u=!0,Mt(s.before_update),s.fragment=i?i(s.ctx):!1,e.target){if(e.hydrate){const f=Ji(e.target);s.fragment&&s.fragment.l(f),f.forEach(W)}else s.fragment&&s.fragment.c();e.intro&&K(t.$$.fragment),Et(t,e.target,e.anchor,e.customElement),yt()}ve(c)}class _t{$destroy(){Pt(this,1),this.$destroy=$t}$on(e,n){if(!Kt(n))return $t;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!qi(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ne=[];function mo(t,e){return{subscribe:Pr(t,e).subscribe}}function Pr(t,e=$t){let n;const i=new Set;function r(l){if(Bt(t,l)&&(t=l,n)){const c=!ne.length;for(const s of i)s[1](),ne.push(s,t);if(c){for(let s=0;s<ne.length;s+=2)ne[s][0](ne[s+1]);ne.length=0}}}function o(l){r(l(t))}function a(l,c=$t){const s=[l,c];return i.add(s),i.size===1&&(n=e(r)||$t),l(t),()=>{i.delete(s),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:a}}function fo(t,e,n){const i=!Array.isArray(t),r=i?[t]:t,o=e.length<2;return mo(n,a=>{let l=!1;const c=[];let s=0,u=$t;const f=()=>{if(s)return;u();const m=e(i?c[0]:c,a);o?a(m):u=Kt(m)?m:$t},g=r.map((m,h)=>Ne(m,y=>{c[h]=y,s&=~(1<<h),l&&f()},()=>{s|=1<<h}));return l=!0,f(),function(){Mt(g),u(),l=!1}})}const po=(t,e,n)=>{const i=gr(t),r=oe(i),o=ji(i,n,r),a=oe(Di(_i(o))),l=oe(e),c=hr(l,-n,a),s=$r(c,a),u=Ii(zi(r,s),It);return Ui(u.x-e.width*.5,u.y-e.height*.5,e.width,e.height)},be=(t,e,n)=>Math.max(e,Math.min(t,n)),ho=async t=>{const e=await $o(t),n=new DataView(e);return xo(n)},$o=t=>new Promise(e=>{const n=new FileReader;n.onload=()=>e(n.result),n.readAsArrayBuffer(t)}),go=(t,e,n)=>{let i=!1,r=-1;for(let s=e;s<n;s++)if(!i&&t.getUint32(s)===1953653099&&(i=!0,s+=4),!!i&&t.getUint8(s)==64){r=s;break}if(r<0)return 0;const o=t.getUint32(r-28),a=t.getUint32(r-20),l=t.getUint32(r-32),c=t.getUint32(r-16);return o===65536&&a===4294901760?90:l===4294901760&&c===4294901760?180:o===4294901760&&a===65536?270:0},vo=1836019574,Vn=1836476516,bo=1953196132,yo=1953653099,on=(t,e=0,n=t.byteLength)=>{const i=[],r=e+n;for(;e<r;){const o=t.getUint32(e);if(o<0)break;const a=t.getUint32(e+4);if(i.push({type:a,size:o,offset:e,bodyOffset:e+8,bodySize:o-8}),o<8)break;e+=o}return i},wo=t=>{const e=on(t).find(o=>o.type===vo);if(!e)return 0;const n=on(t,e.bodyOffset,e.bodySize);n.filter(o=>o.type===yo).forEach(o=>{n.push(...on(t,o.bodyOffset,o.bodySize))});const i=[Vn,bo],r=n.filter(o=>i.includes(o.type));for(const{type:o,bodyOffset:a}of r){const l=t.getUint8(a);let c=a+4;c+=o===Vn?32:36,c+=l===1?12:0;const s=t.getInt32(c),u=t.getInt32(c+4);if(s===0&&u>0)return 90;if(s<0&&u===0)return 180;if(s===0&&u<0)return 270}return 0},xo=(t,{limit:e=1024}={})=>{let n=0;if(n+=4,t.getUint32(n)!==1718909296)return 0;n+=4;const i=t.getUint32(n);return i===1836069938?go(t,n,e):i===1903435808?wo(t):0},Mo=t=>/video/.test(t.type),gn=(t,e=(...i)=>i,n)=>async(i,r,o)=>{o(jn(0,!1));let a=!1;const l=await t(...e(i,r,c=>{a=!0,o(c)}));return n&&n(i,l),a||o(jn(1,!1)),i},Eo=({renameFile:t=void 0,srcBlob:e="blob",srcFile:n="src",destFile:i="dest",defaultFilename:r=void 0}={})=>[gn(Ti,o=>[o[e],t?t(o[n]):o[n].name||`${r}.${pr(o[e].type)}`],(o,a)=>o[i]=a),"blob-to-file"],Kn=({url:t="./",dataset:e=o=>[["dest",o.dest,o.dest.name],["imageState",o.imageState]],destStore:n="store",credentials:i,headers:r={}})=>[gn(async(o,a)=>await Hi(t,o,{onprogress:a,beforeSend:l=>Oi(l,{headers:r,credentials:i})}),(o,a,l)=>[e(o),l],(o,a)=>o[n]=a),"store"],Po=t=>[gn(e=>(!t||!t.length||Object.keys(e).forEach(n=>{t.includes(n)||delete e[n]}),e)),"prop-filter"],So=t=>t&&(Ue(t)?Kn({url:t}):ur(t)?[t,"store"]:Kn(t)),Co=t=>(e,n,i={})=>{const{encoder:r=void 0,renameFile:o=void 0,store:a=void 0,targetSize:l=void 0,outputProps:c=["src","dest","imageState","store"],filter:s=void 0}={...i,...t};if(/video/.test(e.type)){if(r===void 0){console.warn("No encoder supplied.");return}if(!(ur(s)&&!s(e,n)))return[[r({targetSize:l}),"encode-video"],Eo({defaultFilename:"video",renameFile:o}),So(a),Po(c)].filter(Boolean)}},ko=t=>!!t.mozHasAudio||!!t.webkitAudioDecodedByteCount||!!(t.audioTracks&&t.audioTracks.length),Bo=(t,e)=>t[(t.captureStream?"c":"mozC")+"aptureStream"](e),Lo=["video/mp4;codecs=avc1,aac","video/mp4;codecs=avc,aac","video/mp4;codecs=mp4a,aac","video/mp4;codecs=h264,aac","video/mp4","video/webm;codecs=vp9,opus","video/webm;codecs=vp8,opus","video/webm;codecs=h264,opus","video/webm","video/x-matroska;codecs=avc1,opus","video/x-matroska;codecs=vp9,opus","video/x-matroska;codecs=vp8,opus","video/x-matroska"],Xn=(t,e)=>{const n=t.createMediaStreamDestination();return t.createMediaElementSource(e).connect(n),n.stream},To=(t,e,n,i,r)=>new Promise((o,a)=>{const{trim:l=[[0,1]],volume:c,framesPerSecond:s=24,mimeType:u,setupCanvas:f,prepareCanvas:g,updateCanvas:m,audioBitrate:h,videoBitrate:y,mimeTypes:w=Lo}=e,E=u||w.find(L=>MediaRecorder.isTypeSupported(L));let S,P=c===0,U=!0,x=!1;i.cancel=()=>{x=!0,r("cancelled"),o()};const T=new AudioContext;sn()&&T.resume();let j=!1,A;const ot=L=>{if(!n)return;const F=Math.round(L*100);F!==A&&(A=F,n(new ProgressEvent("progress",{loaded:F,total:100,lengthComputable:!0})))};r("recordVideo",E),ot(0);const N=()=>{if(r("detectVideoReady",$.readyState,$.buffered),!x&&!j){if($.readyState===4){U=ko($),ot(.25),J();return}setTimeout(N,16)}},B=(L,F)=>new Promise(z=>{r("drawRange",L);let R=0;const[k,I]=L,H=$.duration,D=Math.max(k,0)*H,Z=Math.min(I,1)*H,nt=Z-D,pt=()=>{if(x)return;const dt=$.currentTime;if(r("draw",dt),m($),F(Math.min(1-(Z-dt)/nt,1)),R++,dt>=Z){r("draw calls",R),z();return}requestAnimationFrame(pt)};pt()}),J=async()=>{if(r("videoReady"),x)return;const L=f($);r("captureVideo",!0);const F=[...Bo(L,s).getTracks()];r("captureAudio",U&&!P);const z=(D,Z)=>{const nt=T.createMediaStreamSource(D),pt=T.createMediaStreamDestination(),dt=T.createGain();return dt.gain.value=Z,nt.connect(dt),dt.connect(pt),pt.stream.getTracks()};if(U&&!P){const D=Xn(T,$),Z=c?z(D,c):D.getTracks();F.push(...Z)}else{if(ye()){const D=Xn(T,$);F.push(...D.getTracks().map(Z=>(Z.enabled=!1,Z)))}$.muted=!0}r("create MediaStream");const R=new MediaStream(F.filter(Boolean)),k=U&&!P?h||48e3:0,I=y||384e3;r("create MediaRecorder");try{S=new MediaRecorder(R,{mimeType:E,audioBitsPerSecond:k,videoBitsPerSecond:I})}catch(D){return a(new Error(`Failed to create MediaRecorder: ${D}`))}r("created MediaRecorder");const H=[];S.ondataavailable=({data:D})=>{if(r("ondataavailable",D),D.size===0)return r("skip");H.push(D)},S.onstop=()=>{r("onstop"),mr(L);const D=$.src;if($.src="",URL.revokeObjectURL(D),ot(1),!H.length)return a(new Error("No data received"));o(new Blob(H,{type:E.split(";")[0]}))},r("prepare canvas"),await g(),r("start recording"),X()},ut=(L,F)=>new Promise((z,R)=>{r("startRecording"),$.play().then(()=>{r("startDrawing"),B(L,F).then(z).catch(R),S.state==="paused"?S.resume():S.start(500)}).catch(R)}),at=()=>{r("pauseRecording"),$.pause(),S.state==="recording"&&S.pause()},Q=()=>{r("stopRecording"),$.pause(),S.stop()},X=async()=>{const L=l.reduce((R,k)=>{const[I,H]=k;return R+(H-I)*$.duration},0);let F=0;r("record",L);const z=l.entries();for(const[R,k]of z){const[I,H]=k,D=(H-I)*$.duration;try{await rt(k,Z=>{const nt=F+Z*D;ot(.25+nt/L*.75)})}catch(Z){a(Z);return}F+=D,R<l.length&&at()}Q()},rt=(L,F)=>new Promise((z,R)=>{r("recordRange",L);const[k]=L;$.onseeked=void 0;let I=!1;const H=()=>{if(r("detectRangeReady",I),!x){if(I){D();return}$.onseeked||($.onseeked=()=>I=!0,$.currentTime=$.duration*k),setTimeout(H,16)}},D=()=>{r("rangeReady"),m($),setTimeout(()=>{ut(L,F).then(z).catch(R)},500)};H()});r("create video");const $=document.createElement("video");$.preload="auto",$.onerror=L=>{j=!0,a(L)},$.playsInline=!0,sn()&&vr()?($.srcObject=t,$.load()):$.src=URL.createObjectURL(t),N()}),Ao=(t,e)=>{if(!t)return e?{fit:"contain",upscale:!0,...e}:void 0;const n=Math.min(t.width||Number.MAX_SAFE_INTEGER,e&&e.width||Number.MAX_SAFE_INTEGER),i=Math.min(t.height||Number.MAX_SAFE_INTEGER,e&&e.height||Number.MAX_SAFE_INTEGER);return{width:n,height:i,fit:t.fit||"contain",upscale:Fo(e)?!0:t.upscale||!1}},Fo=t=>!!(t&&t.width||t&&t.height),Ro=t=>e=>async(n,i,r)=>{const{imageStateToCanvas:o,framesPerSecond:a,audioBitrate:l,videoBitrate:c,mimeTypes:s,mimeType:u,log:f=!1}=t||{};if(typeof window>"u")return;if(!o)throw new Error("createMediaStreamEncoder: imageStateToCanvas is a required parameter");const{src:g,imageState:m}=n,h=await(ye()?ho(g):Promise.resolve());typeof window<"u"&&(N=>{if(N&&N._lq5xdpj)return;const[B,J,ut,at,Q,X,rt]=[[116,101,120,116],[102,111,110,116,87,101,105,103,104,116],[108,105,110,101,72,101,105,103,104,116],[102,111,110,116,83,105,122,101],[100,101,99,111,114,97,116,105,111,110],[85,110,108,105,99,101,110,115,101,100],[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,86,105,100,101,111,32,69,120,116,101,110,115,105,111,110,32,105,110,115,116,97,110,99,101,32]].map(k=>k.map(I=>String.fromCharCode(I)).join("")),$=900,L=[1,1,1,.1],{width:F,height:z}=m.crop,R=z/15;m[Q]=[...m[Q].filter(k=>!k[B]||!k[B].includes(X)),{x:-R*.5,y:-R*.5,width:F*1.5,height:z*1.25,[B]:Array(50).fill(rt).join(""),[J]:$,[ut]:R,[at]:R,color:L}]})(window);const{targetSize:y}=e||{},w=Ao(y,m.targetSize);let E;const{taskCancelToken:S,shapePreprocessor:P}=i,U=N=>(h&&(N.dataset.rotation=`${h}`),E=o(N,m,{targetSize:w,shapePreprocessor:P}),E.canvas),x=()=>E.redraw(),T=()=>E.prepare(),{trim:j,volume:A}=m,ot=Date.now();try{const N=await To(g,{trim:Array.isArray(j)&&je(j[0])?[j]:j,volume:A,targetSize:w,framesPerSecond:a,audioBitrate:l,videoBitrate:c,mimeType:u,mimeTypes:s,setupCanvas:U,prepareCanvas:T,updateCanvas:x},r,S,f?(...B)=>console.log(Date.now()-ot,...B):kt);return{...n,blob:N}}catch(N){throw console.error(N),new Error("createMediaStreamEncoder: error during video recording")}};ye(),ye();function dn(t,e,n,i){if(typeof n=="number"){const r=i-n,o=(n-e)/(t.dt||1/60),a=t.opts.stiffness*r,l=t.opts.damping*o,c=(a-l)*t.inv_mass,s=(o+c)*t.dt;return Math.abs(s)<t.opts.precision&&Math.abs(r)<t.opts.precision?i:(t.settled=!1,n+s)}else{if(Zi(n))return n.map((r,o)=>dn(t,e[o],n[o],i[o]));if(typeof n=="object"){const r={};for(const o in n)r[o]=dn(t,e[o],n[o],i[o]);return r}else throw new Error(`Cannot spring ${typeof n} values`)}}function Sr(t,e={}){const n=Pr(t),{stiffness:i=.15,damping:r=.8,precision:o=.01}=e;let a,l,c,s=t,u=t,f=1,g=0,m=!1;function h(w,E={}){u=w;const S=c={};if(t==null||E.hard||y.stiffness>=1&&y.damping>=1)return m=!0,a=null,s=w,n.set(t=u),Promise.resolve();if(E.soft&&(g=1/((E.soft===!0?.5:+E.soft)*60),f=0),!l){a=null,m=!1;const P={inv_mass:void 0,opts:y,settled:!0,dt:void 0};l=Qi(U=>{if(a===null&&(a=U),m)return m=!1,l=null,!1;f=Math.min(f+g,1),P.inv_mass=f,P.opts=y,P.settled=!0,P.dt=(U-a)*60/1e3;const x=dn(P,s,t,u);return a=U,s=t,n.set(t=x),P.settled&&(l=null),!P.settled})}return new Promise(P=>{l.promise.then(()=>{S===c&&P()})})}const y={set:h,update:(w,E)=>h(w(u,t),E),subscribe:n.subscribe,stiffness:i,damping:r,precision:o};return y}function Io(t){let e,n,i,r;const o=t[5].default,a=Ht(o,t,t[4],null);return{c(){e=G("div"),a&&a.c(),b(e,"class",t[0])},m(l,c){et(l,e,c),a&&a.m(e,null),n=!0,i||(r=[vt(e,"measure",function(){Kt(t[1]&&t[3])&&(t[1]&&t[3]).apply(this,arguments)}),Nt(t[2].call(null,e))],i=!0)},p(l,[c]){t=l,a&&a.p&&(!n||c&16)&&qt(a,o,t,t[4],n?Zt(o,t[4],c,null):Gt(t[4]),null),(!n||c&1)&&b(e,"class",t[0])},i(l){n||(K(a,l),n=!0)},o(l){Y(a,l),n=!1},d(l){l&&W(e),a&&a.d(l),i=!1,Mt(r)}}}function zo(t,e,n){let{$$slots:i={},$$scope:r}=e;const o=no();let{class:a=null}=e;const l=Rt("measurable");let c=!1;const s=({detail:u})=>o("measure",u);return eo(()=>n(1,c=!0)),t.$$set=u=>{"class"in u&&n(0,a=u.class),"$$scope"in u&&n(4,r=u.$$scope)},[a,c,l,s,r,i]}class _o extends _t{constructor(e){super(),zt(this,e,zo,Io,Bt,{class:0})}}const Uo=t=>({}),Hn=t=>({}),jo=t=>({}),Zn=t=>({}),No=t=>({}),qn=t=>({});function Gn(t){let e,n;const i=t[4].header,r=Ht(i,t,t[3],qn);return{c(){e=G("div"),r&&r.c(),b(e,"class","PinturaUtilHeader")},m(o,a){et(o,e,a),r&&r.m(e,null),n=!0},p(o,a){r&&r.p&&(!n||a&8)&&qt(r,i,o,o[3],n?Zt(i,o[3],a,No):Gt(o[3]),qn)},i(o){n||(K(r,o),n=!0)},o(o){Y(r,o),n=!1},d(o){o&&W(e),r&&r.d(o)}}}function Do(t){let e,n;return e=new _o({props:{class:"PinturaStage"}}),e.$on("measure",t[5]),{c(){St(e.$$.fragment)},m(i,r){Et(e,i,r),n=!0},p:$t,i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){Pt(e,i)}}}function Qn(t){let e,n;const i=t[4].footer,r=Ht(i,t,t[3],Hn);return{c(){e=G("div"),r&&r.c(),b(e,"class","PinturaUtilFooter")},m(o,a){et(o,e,a),r&&r.m(e,null),n=!0},p(o,a){r&&r.p&&(!n||a&8)&&qt(r,i,o,o[3],n?Zt(i,o[3],a,Uo):Gt(o[3]),Hn)},i(o){n||(K(r,o),n=!0)},o(o){Y(r,o),n=!1},d(o){o&&W(e),r&&r.d(o)}}}function Oo(t){let e,n,i,r,o,a,l=t[1]&&Gn(t);const c=t[4].main,s=Ht(c,t,t[3],Zn),u=s||Do(t);let f=t[2]&&Qn(t),g=!1;return{c(){l&&l.c(),e=ct(),n=G("div"),u&&u.c(),i=ct(),f&&f.c(),r=ct(),o=Er(),b(n,"class","PinturaUtilMain")},m(m,h){l&&l.m(m,h),et(m,e,h),et(m,n,h),u&&u.m(n,null),t[6](n),et(m,i,h),f&&f.m(m,h),et(m,r,h),et(m,o,h),a=!0},p(m,[h]){m[1]?l?(l.p(m,h),h&2&&K(l,1)):(l=Gn(m),l.c(),K(l,1),l.m(e.parentNode,e)):l&&(le(),Y(l,1,1,()=>{l=null}),ce()),s&&s.p&&(!a||h&8)&&qt(s,c,m,m[3],a?Zt(c,m[3],h,jo):Gt(m[3]),Zn),m[2]?f?(f.p(m,h),h&4&&K(f,1)):(f=Qn(m),f.c(),K(f,1),f.m(r.parentNode,r)):f&&(le(),Y(f,1,1,()=>{f=null}),ce())},i(m){a||(K(l),K(u,m),K(f),K(g),a=!0)},o(m){Y(l),Y(u,m),Y(f),Y(g),a=!1},d(m){l&&l.d(m),m&&W(e),m&&W(n),u&&u.d(m),t[6](null),m&&W(i),f&&f.d(m),m&&W(r),m&&W(o)}}}function Vo(t,e,n){let{$$slots:i={},$$scope:r}=e,{hasHeader:o=!!e.$$slots.header}=e,{hasFooter:a=!!e.$$slots.footer}=e,{root:l=void 0}=e;function c(u){$n.call(this,t,u)}function s(u){jt[u?"unshift":"push"](()=>{l=u,n(0,l)})}return t.$$set=u=>{n(7,e=we(we({},e),Dn(u))),"hasHeader"in u&&n(1,o=u.hasHeader),"hasFooter"in u&&n(2,a=u.hasFooter),"root"in u&&n(0,l=u.root),"$$scope"in u&&n(3,r=u.$$scope)},e=Dn(e),[l,o,a,r,i,c,s]}class Ko extends _t{constructor(e){super(),zt(this,e,Vo,Oo,Bt,{hasHeader:1,hasFooter:2,root:0})}}const Xo=(t,e)=>{if(!e)return;const n=i=>{dr(t,i)};return n(e),{update:n}};function Ho(t){let e,n,i,r,o,a;const l=t[5].default,c=Ht(l,t,t[4],null);return{c(){e=Oe("svg"),c&&c.c(),b(e,"class",t[3]),b(e,"width",t[0]),b(e,"height",t[1]),b(e,"viewBox",n="0 0 "+t[0]+`
    `+t[1]),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"aria-hidden","true"),b(e,"focusable","false"),b(e,"stroke-linecap","round"),b(e,"stroke-linejoin","round")},m(s,u){et(s,e,u),c&&c.m(e,null),r=!0,o||(a=Nt(i=Xo.call(null,e,t[2])),o=!0)},p(s,[u]){c&&c.p&&(!r||u&16)&&qt(c,l,s,s[4],r?Zt(l,s[4],u,null):Gt(s[4]),null),(!r||u&8)&&b(e,"class",s[3]),(!r||u&1)&&b(e,"width",s[0]),(!r||u&2)&&b(e,"height",s[1]),(!r||u&3&&n!==(n="0 0 "+s[0]+`
    `+s[1]))&&b(e,"viewBox",n),i&&Kt(i.update)&&u&4&&i.update.call(null,s[2])},i(s){r||(K(c,s),r=!0)},o(s){Y(c,s),r=!1},d(s){s&&W(e),c&&c.d(s),o=!1,a()}}}function Zo(t,e,n){let{$$slots:i={},$$scope:r}=e,{width:o=24}=e,{height:a=24}=e,{style:l=void 0}=e,{class:c=void 0}=e;return t.$$set=s=>{"width"in s&&n(0,o=s.width),"height"in s&&n(1,a=s.height),"style"in s&&n(2,l=s.style),"class"in s&&n(3,c=s.class),"$$scope"in s&&n(4,r=s.$$scope)},[o,a,l,c,r,i]}class Yn extends _t{constructor(e){super(),zt(this,e,Zo,Ho,Bt,{width:0,height:1,style:2,class:3})}}const re=(t,e=Boolean,n=" ")=>t.filter(e).join(n),qo=(t,e={})=>{const{direction:n=void 0,shiftMultiplier:i=10,bubbles:r=!1,preventDefault:o=!1,stopKeydownPropagation:a=!0}=e,l=n==="horizontal",c=n==="vertical",s=u=>{const{key:f}=u,g=u.shiftKey,m=/up|down/i.test(f),h=/left|right/i.test(f);if(!h&&!m||l&&m||c&&h)return;const y=g?i:1;a&&u.stopPropagation(),o&&u.preventDefault(),t.dispatchEvent(new CustomEvent("nudge",{bubbles:r,detail:Ut((/left/i.test(f)?-1:/right/i.test(f)?1:0)*y,(/up/i.test(f)?-1:/down/i.test(f)?1:0)*y)}))};return t.addEventListener("keydown",s),{destroy(){t.removeEventListener("keydown",s)}}},Go=(t,e)=>(e=1/e,Math.round(t*e)/e),Qo=(t,e,n)=>(t-e)/(n-e),Yo=t=>({}),Jn=t=>({});function Wn(t){let e,n,i;return{c(){e=G("label"),n=xt(t[0]),b(e,"for",t[17]),b(e,"class",i=t[1]?"implicit":void 0)},m(r,o){et(r,e,o),_(e,n)},p(r,o){o[0]&1&&De(n,r[0]),o[0]&131072&&b(e,"for",r[17]),o[0]&2&&i!==(i=r[1]?"implicit":void 0)&&b(e,"class",i)},d(r){r&&W(e)}}}function tr(t){let e,n,i,r,o,a,l,c;return n=new Yn({props:{$$slots:{default:[Jo]},$$scope:{ctx:t}}}),o=new Yn({props:{$$slots:{default:[Wo]},$$scope:{ctx:t}}}),{c(){e=G("button"),St(n.$$.fragment),i=ct(),r=G("button"),St(o.$$.fragment),b(e,"type","button"),b(e,"aria-label","Increase"),b(r,"type","button"),b(r,"aria-label","Decrease")},m(s,u){et(s,e,u),Et(n,e,null),et(s,i,u),et(s,r,u),Et(o,r,null),a=!0,l||(c=[vt(e,"pointerdown",t[20](1)),vt(r,"pointerdown",t[20](-1))],l=!0)},p(s,u){const f={};u[1]&256&&(f.$$scope={dirty:u,ctx:s}),n.$set(f);const g={};u[1]&256&&(g.$$scope={dirty:u,ctx:s}),o.$set(g)},i(s){a||(K(n.$$.fragment,s),K(o.$$.fragment,s),a=!0)},o(s){Y(n.$$.fragment,s),Y(o.$$.fragment,s),a=!1},d(s){s&&W(e),Pt(n),s&&W(i),s&&W(r),Pt(o),l=!1,Mt(c)}}}function Jo(t){let e;return{c(){e=Oe("path"),b(e,"d","M8 12 h8 M12 8 v8")},m(n,i){et(n,e,i)},p:$t,d(n){n&&W(e)}}}function Wo(t){let e;return{c(){e=Oe("path"),b(e,"d","M9 12 h6")},m(n,i){et(n,e,i)},p:$t,d(n){n&&W(e)}}}function ta(t){let e,n,i,r,o,a,l,c,s,u,f,g,m,h,y,w,E=t[0]&&Wn(t);const S=t[37].default,P=Ht(S,t,t[39],null),U=t[37].knob,x=Ht(U,t,t[39],Jn);let T=t[8]&&tr(t);return{c(){e=G("div"),n=G("div"),E&&E.c(),i=ct(),r=G("input"),o=ct(),a=G("div"),P&&P.c(),c=ct(),s=G("div"),u=G("div"),x&&x.c(),g=ct(),T&&T.c(),b(r,"type","range"),b(r,"id",t[17]),b(r,"min",t[2]),b(r,"max",t[3]),b(r,"step",t[4]),r.value=t[13],ht(r,"pointer-events",t[9]?"none":void 0),b(a,"class",l=re(["PinturaSliderTrack",t[5]])),b(u,"class",f=re(["PinturaSliderKnob",t[6]])),b(s,"class","PinturaSliderKnobController"),ht(s,"transform",t[16]),b(n,"class","PinturaSliderControl"),ht(n,"--slider-position",Math.round(t[14])),b(e,"class",m=re(["PinturaSlider",t[11]])),b(e,"data-direction",t[7])},m(j,A){et(j,e,A),_(e,n),E&&E.m(n,null),_(n,i),_(n,r),t[38](r),_(n,o),_(n,a),P&&P.m(a,null),_(n,c),_(n,s),_(s,u),x&&x.m(u,null),_(e,g),T&&T.m(e,null),h=!0,y||(w=[vt(r,"input",t[18]),vt(r,"nudge",t[19]),Nt(qo.call(null,r)),vt(n,"pointerdown",function(){Kt(t[10]&&t[12])&&(t[10]&&t[12]).apply(this,arguments)})],y=!0)},p(j,A){t=j,t[0]?E?E.p(t,A):(E=Wn(t),E.c(),E.m(n,i)):E&&(E.d(1),E=null),(!h||A[0]&131072)&&b(r,"id",t[17]),(!h||A[0]&4)&&b(r,"min",t[2]),(!h||A[0]&8)&&b(r,"max",t[3]),(!h||A[0]&16)&&b(r,"step",t[4]),(!h||A[0]&8192)&&(r.value=t[13]),A[0]&512&&ht(r,"pointer-events",t[9]?"none":void 0),P&&P.p&&(!h||A[1]&256)&&qt(P,S,t,t[39],h?Zt(S,t[39],A,null):Gt(t[39]),null),(!h||A[0]&32&&l!==(l=re(["PinturaSliderTrack",t[5]])))&&b(a,"class",l),x&&x.p&&(!h||A[1]&256)&&qt(x,U,t,t[39],h?Zt(U,t[39],A,Yo):Gt(t[39]),Jn),(!h||A[0]&64&&f!==(f=re(["PinturaSliderKnob",t[6]])))&&b(u,"class",f),A[0]&65536&&ht(s,"transform",t[16]),A[0]&16384&&ht(n,"--slider-position",Math.round(t[14])),t[8]?T?(T.p(t,A),A[0]&256&&K(T,1)):(T=tr(t),T.c(),K(T,1),T.m(e,null)):T&&(le(),Y(T,1,1,()=>{T=null}),ce()),(!h||A[0]&2048&&m!==(m=re(["PinturaSlider",t[11]])))&&b(e,"class",m),(!h||A[0]&128)&&b(e,"data-direction",t[7])},i(j){h||(K(P,j),K(x,j),K(T),h=!0)},o(j){Y(P,j),Y(x,j),Y(T),h=!1},d(j){j&&W(e),E&&E.d(),t[38](null),P&&P.d(j),x&&x.d(j),T&&T.d(),y=!1,Mt(w)}}}function ea(t,e,n){let i,r,o,a,l,c,s,u,f,g,{$$slots:m={},$$scope:h}=e,{id:y=void 0}=e,{label:w=void 0}=e,{hideLabel:E=!1}=e,{min:S=0}=e,{max:P=100}=e,{step:U=1}=e,{value:x=0}=e,{valueMin:T=void 0}=e,{valueMax:j=void 0}=e,{trackClass:A=void 0}=e,{knobClass:ot=void 0}=e,{ongrab:N=kt}=e,{onchange:B=kt}=e,{onrelease:J=kt}=e,{onexceed:ut=kt}=e,{direction:at="x"}=e,{getValue:Q=_n}=e,{setValue:X=_n}=e,{enableSpinButtons:rt=!0}=e,{enableForceUseKnob:$=!1}=e,{enableStopPropagation:L=!0}=e,{enablePointerdownListener:F=!0}=e,{maxInteractionDistance:z=6}=e,{class:R=void 0}=e,k,I,H,D,Z,nt;const pt=v=>X(Go(be(v,S,P),U),x),dt=(v,bt,Ct={})=>{const{grabbed:Ot=!1,released:ue=!1}=Ct,it=pt(S+v/bt*o),Me=T||S,Ee=j||P;n(21,x=Ue(it)?it:be(it,Me,Ee)),nt!==it&&(nt=it,!Ue(it)&&(it<Me||it>Ee)&&ut(x,it),x!==Z&&(Z=x,Ot&&N(x),B(x),ue&&J(x)))},gt=v=>{I||(n(21,x=X(parseFloat(v.target.value))),x!==Z&&(Z=x,B(x)))};let wt;const O=v=>{const bt=k[u],Ct=r/o*bt;dt(Ct+v.detail[at],bt),clearTimeout(wt),wt=setTimeout(()=>{J(x)},250)},q=v=>{const bt=k.getBoundingClientRect(),Ct=v[f]-bt[at],Ot=k[u];return Math.abs(Ct-a*Ot)};let Lt;const Dt=v=>{clearTimeout(Lt);let bt=!1;L&&v.stopPropagation(),clearTimeout(wt);const Ct=k.getBoundingClientRect();if(I=k[u],D=v[f],H=D-Ct[at],$){if(Math.abs(H-a*I)>z)return;bt=!0,v.stopPropagation()}return document.activeElement!==k&&k.focus(),dt(H,I,{grabbed:!0}),document.documentElement.addEventListener("pointermove",Yt),document.documentElement.addEventListener("pointerup",Jt),bt},Yt=v=>{const bt=v[f]-D;dt(H+bt,I)},Jt=v=>{Lt=setTimeout(()=>{I=void 0},50),document.documentElement.removeEventListener("pointermove",Yt),document.documentElement.removeEventListener("pointerup",Jt),B(x),J(x)},Tt=()=>{n(21,x=pt(r+M*U)),B(x)};let p,M=1,C=!1;const st=v=>bt=>{clearTimeout(wt),M=v,C=!1,p=setInterval(()=>{C=!0,Tt()},100),document.addEventListener("pointercancel",V),document.addEventListener("pointerup",V)},V=v=>{clearTimeout(p),C||Tt(),J(x),document.removeEventListener("pointerup",V)};function tt(v){jt[v?"unshift":"push"](()=>{k=v,n(15,k)})}return t.$$set=v=>{"id"in v&&n(22,y=v.id),"label"in v&&n(0,w=v.label),"hideLabel"in v&&n(1,E=v.hideLabel),"min"in v&&n(2,S=v.min),"max"in v&&n(3,P=v.max),"step"in v&&n(4,U=v.step),"value"in v&&n(21,x=v.value),"valueMin"in v&&n(23,T=v.valueMin),"valueMax"in v&&n(24,j=v.valueMax),"trackClass"in v&&n(5,A=v.trackClass),"knobClass"in v&&n(6,ot=v.knobClass),"ongrab"in v&&n(25,N=v.ongrab),"onchange"in v&&n(26,B=v.onchange),"onrelease"in v&&n(27,J=v.onrelease),"onexceed"in v&&n(28,ut=v.onexceed),"direction"in v&&n(7,at=v.direction),"getValue"in v&&n(29,Q=v.getValue),"setValue"in v&&n(30,X=v.setValue),"enableSpinButtons"in v&&n(8,rt=v.enableSpinButtons),"enableForceUseKnob"in v&&n(9,$=v.enableForceUseKnob),"enableStopPropagation"in v&&n(31,L=v.enableStopPropagation),"enablePointerdownListener"in v&&n(10,F=v.enablePointerdownListener),"maxInteractionDistance"in v&&n(32,z=v.maxInteractionDistance),"class"in v&&n(11,R=v.class),"$$scope"in v&&n(39,h=v.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&4194305&&n(17,i=y||(w?`PinturaSlider_${Mi()}`:void 0)),t.$$.dirty[0]&538968064&&n(13,r=x!==void 0?Q(x):0),t.$$.dirty[0]&12&&(o=P-S),t.$$.dirty[0]&8204&&n(34,a=Qo(r,S,P)),t.$$.dirty[1]&8&&n(14,l=a*100),t.$$.dirty[0]&128&&n(35,c=at.toUpperCase()),t.$$.dirty[0]&128&&n(36,s=at==="x"?"Width":"Height"),t.$$.dirty[1]&32&&(u=`offset${s}`),t.$$.dirty[1]&16&&(f=`page${c}`),t.$$.dirty[0]&16384|t.$$.dirty[1]&16&&n(16,g=`translate${c}(${l}%)`)},[w,E,S,P,U,A,ot,at,rt,$,F,R,Dt,r,l,k,g,i,gt,O,st,x,y,T,j,N,B,J,ut,Q,X,L,z,q,a,c,s,m,tt,h]}class mn extends _t{constructor(e){super(),zt(this,e,ea,ta,Bt,{id:22,label:0,hideLabel:1,min:2,max:3,step:4,value:21,valueMin:23,valueMax:24,trackClass:5,knobClass:6,ongrab:25,onchange:26,onrelease:27,onexceed:28,direction:7,getValue:29,setValue:30,enableSpinButtons:8,enableForceUseKnob:9,enableStopPropagation:31,enablePointerdownListener:10,maxInteractionDistance:32,class:11,eventDistanceToKnob:33,handlePointerDown:12},null,[-1,-1])}get eventDistanceToKnob(){return this.$$.ctx[33]}get handlePointerDown(){return this.$$.ctx[12]}}const Cr=()=>Math.random().toString(36).substring(2,9),{Boolean:na}=Yi;function er(t,e,n){const i=t.slice();return i[53]=e[n],i[54]=e,i[55]=n,i}function nr(t){let e,n,i,r,o;function a(...l){return t[28](t[55],...l)}return{c(){e=G("button"),n=xt("Ã—"),b(e,"class","PinturaMediaRangeIndicatorButton"),b(e,"type","button"),b(e,"title",i=t[1].trimLabelRemove||"Remove")},m(l,c){et(l,e,c),_(e,n),r||(o=vt(e,"click",a),r=!0)},p(l,c){t=l,c[0]&2&&i!==(i=t[1].trimLabelRemove||"Remove")&&b(e,"title",i)},d(l){l&&W(e),r=!1,o()}}}function rr(t){let e,n,i,r,o,a,l,c,s,u,f=t[55]+1+"",g,m,h,y,w,E=t[55],S,P,U,x=t[55]+1+"",T,j,A,ot,N,B,J,ut,at,Q,X=t[6]&&!(t[0].length===1&&t[53].from.value===0&&t[53].to.value===1)&&nr(t);function rt(){return t[29](t[55])}function $(...O){return t[30](t[55],t[53],...O)}function L(...O){return t[31](t[53],t[55],...O)}function F(...O){return t[32](t[53],t[55],...O)}const z=[t[53].defaults,t[53].from,{ongrab:rt},{onchange:$},{onexceed:L},{onrelease:F}],R=()=>t[33](w,E),k=()=>t[33](null,E);let I={};for(let O=0;O<z.length;O+=1)I=we(I,z[O]);w=new mn({props:I}),R();function H(){return t[34](t[55])}function D(...O){return t[35](t[55],t[53],...O)}function Z(...O){return t[36](t[53],t[55],...O)}function nt(...O){return t[37](t[53],t[55],...O)}const pt=[t[53].defaults,t[53].to,{ongrab:H},{onchange:D},{onexceed:Z},{onrelease:nt}],dt=()=>t[38](N,E),gt=()=>t[38](null,E);let wt={};for(let O=0;O<pt.length;O+=1)wt=we(wt,pt[O]);return N=new mn({props:wt}),dt(),{c(){e=G("div"),n=G("div"),i=G("div"),r=ct(),o=G("div"),a=ct(),X&&X.c(),c=ct(),s=G("label"),u=xt("Trim "),g=xt(f),m=xt(" start"),y=ct(),St(w.$$.fragment),S=ct(),P=G("label"),U=xt("Trim "),T=xt(x),j=xt(" end"),ot=ct(),St(N.$$.fragment),B=ct(),b(i,"class","PinturaMediaRangeIndicatorShadow"),b(o,"class","PinturaMediaRangeIndicatorOutline"),b(n,"class","PinturaMediaRangeIndicator"),b(n,"data-layout",l=t[53].indicator.width*100<5?"hidden":"default"),ht(n,"left",`${t[53].indicator.left*100}%`),ht(n,"width",`${It(t[53].indicator.width*100,6)}%`),b(s,"for",h=t[53].from.id),b(s,"class","implicit"),b(P,"for",A=t[53].to.id),b(P,"class","implicit"),b(e,"class","PinturaMediaRangeClip"),b(e,"data-index",`range_${t[55]}`),b(e,"data-merge",J=t[10][1]===t[55]+1?"right":t[10][0]===t[55]-1?"left":"none"),b(e,"data-flex",ut=t[11][0]||void 0),b(e,"data-state",at=[t[9]===t[55]&&"active",t[53].indicator.visible&&"visible"].filter(Boolean).join(" ")),ht(e,"--flex",je(t[11][1])?t[11][1]:void 0)},m(O,q){et(O,e,q),_(e,n),_(n,i),_(n,r),_(n,o),_(n,a),X&&X.m(n,null),_(e,c),_(e,s),_(s,u),_(s,g),_(s,m),_(e,y),Et(w,e,null),_(e,S),_(e,P),_(P,U),_(P,T),_(P,j),_(e,ot),Et(N,e,null),_(e,B),Q=!0},p(O,q){t=O,t[6]&&!(t[0].length===1&&t[53].from.value===0&&t[53].to.value===1)?X?X.p(t,q):(X=nr(t),X.c(),X.m(n,null)):X&&(X.d(1),X=null),(!Q||q[0]&32768&&l!==(l=t[53].indicator.width*100<5?"hidden":"default"))&&b(n,"data-layout",l),q[0]&32768&&ht(n,"left",`${t[53].indicator.left*100}%`),q[0]&32768&&ht(n,"width",`${It(t[53].indicator.width*100,6)}%`),(!Q||q[0]&32768&&h!==(h=t[53].from.id))&&b(s,"for",h),E!==t[55]&&(k(),E=t[55],R());const Lt=q[0]&429592?On(z,[q[0]&32768&&ze(t[53].defaults),q[0]&32768&&ze(t[53].from),q[0]&512&&{ongrab:rt},q[0]&166920&&{onchange:$},q[0]&35840&&{onexceed:L},q[0]&298e3&&{onrelease:F}]):{};w.$set(Lt),(!Q||q[0]&32768&&A!==(A=t[53].to.id))&&b(P,"for",A),E!==t[55]&&(gt(),E=t[55],dt());const Dt=q[0]&429593?On(pt,[q[0]&32768&&ze(t[53].defaults),q[0]&32768&&ze(t[53].to),q[0]&512&&{ongrab:H},q[0]&166921&&{onchange:D},q[0]&35840&&{onexceed:Z},q[0]&298e3&&{onrelease:nt}]):{};N.$set(Dt),(!Q||q[0]&1024&&J!==(J=t[10][1]===t[55]+1?"right":t[10][0]===t[55]-1?"left":"none"))&&b(e,"data-merge",J),(!Q||q[0]&2048&&ut!==(ut=t[11][0]||void 0))&&b(e,"data-flex",ut),(!Q||q[0]&33280&&at!==(at=[t[9]===t[55]&&"active",t[53].indicator.visible&&"visible"].filter(Boolean).join(" ")))&&b(e,"data-state",at),q[0]&2048&&ht(e,"--flex",je(t[11][1])?t[11][1]:void 0)},i(O){Q||(K(w.$$.fragment,O),K(N.$$.fragment,O),Q=!0)},o(O){Y(w.$$.fragment,O),Y(N.$$.fragment,O),Q=!1},d(O){O&&W(e),X&&X.d(),k(),Pt(w),gt(),Pt(N)}}}function ra(t){let e,n,i,r,o=t[15],a=[];for(let c=0;c<o.length;c+=1)a[c]=rr(er(t,o,c));const l=c=>Y(a[c],1,1,()=>{a[c]=null});return{c(){e=G("div");for(let c=0;c<a.length;c+=1)a[c].c();b(e,"class","PinturaMediaClipper"),ht(e,"cursor",t[14])},m(c,s){et(c,e,s);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(e,null);t[39](e),n=!0,i||(r=[vt(e,"measure",t[40]),vt(e,"pointerdown",function(){Kt(t[5]&&t[7])&&(t[5]&&t[7]).apply(this,arguments)}),vt(e,"pointermove",t[20]),vt(e,"pointerleave",t[19]),Nt(t[16].call(null,e))],i=!0)},p(c,s){if(t=c,s[0]&437855){o=t[15];let u;for(u=0;u<o.length;u+=1){const f=er(t,o,u);a[u]?(a[u].p(f,s),K(a[u],1)):(a[u]=rr(f),a[u].c(),K(a[u],1),a[u].m(e,null))}for(le(),u=o.length;u<a.length;u+=1)l(u);ce()}s[0]&16384&&ht(e,"cursor",t[14])},i(c){if(!n){for(let s=0;s<o.length;s+=1)K(a[s]);n=!0}},o(c){a=a.filter(na);for(let s=0;s<a.length;s+=1)Y(a[s]);n=!1},d(c){c&&W(e),Mr(a,c),t[39](null),i=!1,Mt(r)}}}const ia=5,oa=15;function aa(t,e,n){let i,r,o,a,l;const c=Rt("measurable");let{ranges:s}=e,{locale:u={}}=e,{minSize:f=0}=e,{maxSize:g=1}=e,{precision:m}=e,{onchange:h=kt}=e,{ondragrange:y=kt}=e,{onrelease:w=kt}=e,{enablePointerdownListener:E=!0}=e,{enableRemoveButton:S=!0}=e,P,U=[],x=[];const T=Cr();function j(p){return be(p/3,ia,oa)}const A=(p,M)=>{const C=[...s];C[p]=M,h(C)},ot=(p,M)=>{const C=s[p][0],st=s[M][1],V=[C,st],tt=[...s];tt.splice(p,2,V),h(tt)};let N,B;const J=(p,M)=>{const C=p/M;return l.find(({from:st,to:V})=>{const tt=V.value-st.value,v=j(tt*M)/M;return Math.abs(C-st.value)<=v||Math.abs(C-V.value)<=v})},ut=(p,M)=>{const C=p/M;return l.find(({from:st,to:V})=>{const tt=V.value-st.value,v=j(tt*M)/M;return C>st.value+v&&C<V.value-v})},at=p=>l.findIndex(({from:M,to:C})=>p>M.value&&p<C.value);let Q,X,rt,$,L;const F=[],z=p=>{if(!N.contains(p.target)||p.target.nodeName==="BUTTON")return!1;const M=F.filter(Boolean).map(V=>({slider:V,dist:V.eventDistanceToKnob(p)})).sort((V,tt)=>V.dist<tt.dist?-1:V.dist>tt.dist?1:0).map(({slider:V})=>V);let C=!1;for(const V of M)if(V.handlePointerDown(p)){p.stopPropagation(),C=!0;break}if(C)return!0;$=p.pageX;const st=p.offsetX/B.width;if(rt=at(st),rt===-1)return!1;if(Q=[...s[rt]],!(Q[0]===0&&Q[1]===1))return n(14,I="grabbing"),X=[l[rt-1]?l[rt-1].to.value:0,l[rt+1]?l[rt+1].from.value:1],document.documentElement.addEventListener("pointermove",R),document.documentElement.addEventListener("pointerup",k),document.documentElement.addEventListener("pointercancel",k),!1},R=p=>{L=p.pageX-$;const M=L/B.width,[C,st]=X;let[V,tt]=Q,v=tt-V;V+=M,tt+=M,tt>st&&(tt=st,V=tt-v),V<C&&(V=C,tt=V+v),A(rt,[V,tt])},k=p=>{document.documentElement.removeEventListener("pointermove",R),document.documentElement.removeEventListener("pointerup",k),document.documentElement.removeEventListener("pointercancel",k),rt=void 0,n(14,I="grab"),w()};let I="default";const H=()=>{n(14,I="default")},D=p=>{if(rt>=0)return;const M=ut(p.offsetX,B.width);if(M&&M.from.value===0&&M.to.value===1){n(14,I="default");return}if(M){n(14,I="grab");return}if(J(p.offsetX,B.width)){n(14,I="ew-resize");return}n(14,I="default")},Z=(p,M)=>{if(M.preventDefault(),M.stopPropagation(),s.length===1){h([[0,1]]);return}const C=[...s];C.splice(p,1),h(C)},nt=p=>n(9,P=p),pt=(p,M,C)=>{if(A(p,[C,M.to.value]),y(C),C>M.from.valueAdjacent||p-1<0){n(10,U=[]),n(11,x=[]);return}n(11,x=[p*2,0]),n(10,U=[p-1,p])},dt=(p,M,C,st)=>{if(C>p.from.valueAdjacent){n(11,x=[]),n(10,U=[]);return}const V=Math.abs(st-C),tt=be(V/.05,0,1);n(11,x=[M*2,It(tt,6)])},gt=(p,M,C)=>{n(11,x=[]),C===p.from.valueAdjacent?M-1>=0&&(n(10,U=[]),ot(M-1,M)):n(10,U=[]),w()};function wt(p,M){jt[p?"unshift":"push"](()=>{F[M*2]=p,n(13,F)})}const O=p=>n(9,P=p),q=(p,M,C)=>{if(A(p,[M.from.value,C]),y(C),C<M.to.valueAdjacent||p+1>=s.length){n(10,U=[]),n(11,x=[]);return}n(11,x=[p*2+1,0]),n(10,U=[p,p+1])},Lt=(p,M,C,st)=>{if(C<p.to.valueAdjacent){n(11,x=[]),n(10,U=[]);return}const V=Math.abs(st-C),tt=be(V/.05,0,1);n(11,x=[M*2+1,It(tt,6)])},Dt=(p,M,C)=>{n(11,x=[]),C===p.to.valueAdjacent?M+1<l.length&&(n(10,U=[]),ot(M,M+1)):n(10,U=[]),w()};function Yt(p,M){jt[p?"unshift":"push"](()=>{F[M*2+1]=p,n(13,F)})}function Jt(p){jt[p?"unshift":"push"](()=>{N=p,n(12,N)})}const Tt=p=>n(8,B=p.detail);return t.$$set=p=>{"ranges"in p&&n(0,s=p.ranges),"locale"in p&&n(1,u=p.locale),"minSize"in p&&n(21,f=p.minSize),"maxSize"in p&&n(22,g=p.maxSize),"precision"in p&&n(23,m=p.precision),"onchange"in p&&n(2,h=p.onchange),"ondragrange"in p&&n(3,y=p.ondragrange),"onrelease"in p&&n(4,w=p.onrelease),"enablePointerdownListener"in p&&n(5,E=p.enablePointerdownListener),"enableRemoveButton"in p&&n(6,S=p.enableRemoveButton)},t.$$.update=()=>{t.$$.dirty[0]&1&&n(27,i=s.reduce((p,[M,C])=>p+(C-M),0)),t.$$.dirty[0]&138412032&&n(24,r=g-i),t.$$.dirty[0]&136314880&&n(25,o=i-f),t.$$.dirty[0]&256&&n(26,a=je(B==null?void 0:B.width)?B.width:512),t.$$.dirty[0]&125829121&&n(15,l=s.map(([p,M],C)=>{const[,st]=s[C-1]||[,0],[V]=s[C+1]||[1],tt=a*(M-p),v=j(tt);return{defaults:{min:0,max:1,step:m,enableSpinButtons:!1,enableForceUseKnob:!0,enableStopPropagation:!1,enablePointerdownListener:!1,maxInteractionDistance:v},indicator:{left:p,width:M-p,visible:!(It(p,6)===0&&It(M,6)===1)},from:{id:`range_from_${T}_${C}`,value:p,valueMin:Math.max(st,p-r),valueMax:Math.min(M,o+p),valueAdjacent:st},to:{id:`range_to_${T}_${C}`,value:M,valueMin:Math.max(p,M-o),valueMax:Math.min(V,M+r),valueAdjacent:V}}}))},[s,u,h,y,w,E,S,z,B,P,U,x,N,F,I,l,c,A,ot,H,D,f,g,m,r,o,a,i,Z,nt,pt,dt,gt,wt,O,q,Lt,Dt,Yt,Jt,Tt]}class sa extends _t{constructor(e){super(),zt(this,e,aa,ra,Bt,{ranges:0,locale:1,minSize:21,maxSize:22,precision:23,onchange:2,ondragrange:3,onrelease:4,enablePointerdownListener:5,enableRemoveButton:6,handlePointerDown:7},null,[-1,-1])}get handlePointerDown(){return this.$$.ctx[7]}}const la=(t,e=0,n,i=0)=>{const r=[],o=[];let a=[],l=[],c=i;const s=()=>{l.forEach(f=>f()),l=[]},u=()=>{s();for(let f=0;f<c;f++){r[f]=t(e,n);const g=r[f].subscribe(m=>{o[f]=m,a.forEach(h=>h(o))});l.push(g)}};return u(),{subscribe:f=>(a.push(f),f(o),()=>a=a.filter(g=>g===f)),unsubscribe:()=>{s()},set:(f,g,m)=>{r[f].set(g,m)},set length(f){c=f,u()},reset:()=>{for(let f=0;f<c;f++)r[f].set(e,{hard:!0})}}},ir=(t,e)=>{t.fastSeek&&t.fastSeek(e),t.currentTime=e};function or(t,e,n){const i=t.slice();return i[31]=e[n],i[33]=n,i}function ar(t){let e;return{c(){e=G("div"),b(e,"class","PinturaMediaMask"),b(e,"data-index",`mask_${t[33]}`),ht(e,"left",`${t[31][0]*100}%`),ht(e,"Width",`width:${(t[31][1]-t[31][0])*100}%`)},m(n,i){et(n,e,i)},p(n,i){i[0]&4&&ht(e,"left",`${n[31][0]*100}%`),i[0]&4&&ht(e,"Width",`width:${(n[31][1]-n[31][0])*100}%`)},d(n){n&&W(e)}}}function ca(t){let e,n,i,r=t[2],o=[];for(let a=0;a<r.length;a+=1)o[a]=ar(or(t,r,a));return{c(){e=G("div");for(let a=0;a<o.length;a+=1)o[a].c();b(e,"class","PinturaVideoFrames")},m(a,l){et(a,e,l);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);n||(i=[vt(e,"measure",t[23]),Nt(t[3].call(null,e,{observePosition:!0}))],n=!0)},p(a,l){if(l[0]&4){r=a[2];let c;for(c=0;c<r.length;c+=1){const s=or(a,r,c);o[c]?o[c].p(s,l):(o[c]=ar(s),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}},i:$t,o:$t,d(a){a&&W(e),Mr(o,a),n=!1,Mt(i)}}}function ua(t,e,n){let i,r,o,a,l,c,s,u,f,g,m,h,{video:y}=e,{videoSize:w}=e,{cropAspectRatio:E}=e,{pixelRatio:S}=e,{onchange:P=kt}=e,{frameBackgroundColor:U}=e,{frameScaleFactor:x=2}=e,{frameLimit:T=16}=e,{ranges:j}=e;const A=Rt("measurable"),ot=Qt()&&document.createElement("canvas");let N=[],B;const J=la(Sr,0,{stiffness:.2,damping:.7,precision:.01});lt(t,J,$=>n(22,h=$));const ut=()=>{N.forEach(nt=>mr(nt)),N=[],J.reset();const $=y.cloneNode();let L=!1,F=!1,z=0,R=1,k=0;const I=()=>{if(L||!F)return;const nt=document.createElement("canvas");if(nt.width=g,nt.height=m,nt.getContext("2d").drawImage($,1,0,g,m),nt.dataset.retain=!0,N=[...N,nt],J.set(k,1),k++,z+=R,z+R*.5>=y.duration){setTimeout(()=>{$.removeEventListener("seeked",D),$.removeEventListener("error",Z),$.src="",$.remove()},100);return}ir($,z+R*.5)},H=()=>{$.removeEventListener("loadeddata",H),!L&&(R=y.duration/s,z=0,F=!0,ir($,R*.5))},D=()=>{I()},Z=()=>{console.error($.error)};return $.addEventListener("seeked",D),$.addEventListener("error",Z),$.readyState>0?H():$.addEventListener("loadeddata",H),sn()&&vr()&&($.srcObject=y.srcObject,$.load()),()=>{$.removeEventListener("seeked",D),$.removeEventListener("error",Z),$.removeEventListener("loadeddata",H),L=!0}},at=()=>{N=[],J.reset();let $=y.duration/s,L=!1;const F=(z,R)=>{const k=y.cloneNode(),I=()=>{L||(k.onseeked=()=>{N[z]=k,J.set(z,1)},k.currentTime=R)};k.readyState>0?I():k.onloadeddata=I};for(let z=0;z<s;z++){const R=z*$+$*.5;F(z,R)}return()=>{L=!0}};let Q;const X=($,L,F)=>{const z=[];for(let R=0;R<$;R++){const k=R,I=F.width/$,H=F.height,D=I*k;z.push({itemRect:{x:D,y:0,width:I,height:H},opacity:1,backgroundColor:[...U],data:N[k]||ot,dataSize:{width:u,height:f}})}P(z)},rt=$=>n(0,B=$.detail);return t.$$set=$=>{"video"in $&&n(4,y=$.video),"videoSize"in $&&n(5,w=$.videoSize),"cropAspectRatio"in $&&n(6,E=$.cropAspectRatio),"pixelRatio"in $&&n(7,S=$.pixelRatio),"onchange"in $&&n(8,P=$.onchange),"frameBackgroundColor"in $&&n(9,U=$.frameBackgroundColor),"frameScaleFactor"in $&&n(10,x=$.frameScaleFactor),"frameLimit"in $&&n(11,T=$.frameLimit),"ranges"in $&&n(12,j=$.ranges)},t.$$.update=()=>{t.$$.dirty[0]&4096&&n(2,i=j.map(([$,L],F)=>{const[,z]=j[F-1]||[,0];return[z,$]}).concat([[j[j.length-1][1],1]])),t.$$.dirty[0]&1&&n(15,r=B&&B.width&&B.height),t.$$.dirty[0]&48&&n(18,o=y&&w.width/w.height),t.$$.dirty[0]&262208&&n(20,a=E||o),t.$$.dirty[0]&32769&&n(21,l=r&&B.width/B.height),t.$$.dirty[0]&3145728&&n(19,c=l&&a&&Math.ceil(l/a)),t.$$.dirty[0]&526336&&n(14,s=c&&Math.min(T,c)),t.$$.dirty[0]&16385&&n(17,u=B&&s&&B.width/s),t.$$.dirty[0]&393216&&n(16,f=u&&u/o),t.$$.dirty[0]&16384&&n(1,J.length=s,J),t.$$.dirty[0]&132224&&(g=u&&Math.floor(u*S*x)),t.$$.dirty[0]&66688&&(m=f&&Math.floor(f*S*x)),t.$$.dirty[0]&24592&&y&&s&&(Q&&Q(),n(13,Q=ye()&&wi()?at():ut())),t.$$.dirty[0]&4243457&&r&&X(s,h,B)},[B,J,i,A,y,w,E,S,P,U,x,T,j,Q,s,r,f,u,o,c,a,l,h,rt]}class da extends _t{constructor(e){super(),zt(this,e,ua,ca,Bt,{video:4,videoSize:5,cropAspectRatio:6,pixelRatio:7,onchange:8,frameBackgroundColor:9,frameScaleFactor:10,frameLimit:11,ranges:12},null,[-1,-1])}}function sr(t){let e,n;return{c(){e=new to(!1),n=Er(),e.a=n},m(i,r){e.m(t[1],i,r),et(i,n,r)},p(i,r){r&2&&e.p(i[1])},d(i){i&&W(n),i&&e.d()}}}function ma(t){let e,n,i,r=t[1]&&sr(t);return{c(){e=G("div"),r&&r.c(),b(e,"class","PinturaMeter")},m(o,a){et(o,e,a),r&&r.m(e,null),n||(i=[vt(e,"measure",t[6]),Nt(t[2].call(null,e))],n=!0)},p(o,[a]){o[1]?r?r.p(o,a):(r=sr(o),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:$t,o:$t,d(o){o&&W(e),r&&r.d(),n=!1,Mt(i)}}}function fa(t,e,n){let{steps:i=10}=e,{skipFirst:r=!1}=e,{skipLast:o=!1}=e,{size:a=void 0}=e;const l=Rt("measurable");let c;const s={x:2},u=(g,m,h)=>`M ${g} ${m} L${g} ${m+h}`,f=g=>n(0,a=Fi(g.detail));return t.$$set=g=>{"steps"in g&&n(3,i=g.steps),"skipFirst"in g&&n(4,r=g.skipFirst),"skipLast"in g&&n(5,o=g.skipLast),"size"in g&&n(0,a=g.size)},t.$$.update=()=>{if(t.$$.dirty&57&&a){let g,m,h="",y,w=a.y;const E=a.x/i;for(let S=0;S<=i;S++)if(g=s.x+S*E,m=0,!(S===0&&r)){if(S===i&&o)break;h+=u(g,m,4)+" "}y=g+s.x,n(1,c=`<svg width="${y}" height="${w}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${y} ${w}" aria-hidden="true" focusable="false"><path fill-rule="evenodd" d="${h.trim()}"/></svg>`)}},[a,c,l,i,r,o,f]}class pa extends _t{constructor(e){super(),zt(this,e,fa,ma,Bt,{steps:3,skipFirst:4,skipLast:5,size:0})}}const ha=t=>{const e=Math.round(t),n=Math.floor(e/3600),i=Math.floor((e-n*3600)/60),r=Math.round(e-n*3600-i*60);return[n,i,r]},fn=t=>ha(t).filter((e,n)=>n===0?e>0:!0).map((e,n)=>n>0?`${e}`.padStart(2,"0"):e).join(":");function $a(t){let e,n,i,r,o,a,l,c,s,u,f,g,m;function h(w){t[6](w)}let y={steps:16,skipFirst:!0,skipLast:!0};return t[0]!==void 0&&(y.size=t[0]),n=new pa({props:y}),jt.push(()=>co(n,"size",h)),{c(){e=G("div"),St(n.$$.fragment),r=ct(),o=G("div"),a=G("time"),l=xt(t[1]),c=ct(),s=G("time"),u=xt(t[2]),b(o,"class","timeLabels"),b(e,"class","PinturaTimeline")},m(w,E){et(w,e,E),Et(n,e,null),_(e,r),_(e,o),_(o,a),_(a,l),_(o,c),_(o,s),_(s,u),f=!0,g||(m=[vt(e,"measure",t[5]),Nt(t[3].call(null,e))],g=!0)},p(w,[E]){const S={};!i&&E&1&&(i=!0,S.size=w[0],ao(()=>i=!1)),n.$set(S),(!f||E&2)&&De(l,w[1]),(!f||E&4)&&De(u,w[2])},i(w){f||(K(n.$$.fragment,w),f=!0)},o(w){Y(n.$$.fragment,w),f=!1},d(w){w&&W(e),Pt(n),g=!1,Mt(m)}}}function ga(t,e,n){let i,r,{duration:o}=e;const a=Rt("measurable");let l;function c(u){$n.call(this,t,u)}function s(u){l=u,n(0,l)}return t.$$set=u=>{"duration"in u&&n(4,o=u.duration)},t.$$.update=()=>{t.$$.dirty&16&&n(2,i=fn(o))},n(1,r=fn(0)),[l,r,i,a,o,c,s]}class va extends _t{constructor(e){super(),zt(this,e,ga,$a,Bt,{duration:4})}}function ba(t){let e,n;return{c(){e=G("span"),n=xt(t[6]),b(e,"slot","knob")},m(i,r){et(i,e,r),_(e,n)},p(i,r){r&64&&De(n,i[6])},d(i){i&&W(e)}}}function ya(t){let e,n,i,r,o;return r=new mn({props:{id:t[7],class:"PinturaActiveFrame",enableSpinButtons:!1,enableStopPropagation:!1,knobClass:["PinturaActiveFrameKnob",t[4]&&"PinturaActiveFrameDetailedKnob"].filter(Boolean).join(" "),value:t[0],onchange:t[2],onrelease:t[3],min:0,max:1,setValue:t[5],step:t[1],$$slots:{knob:[ba]},$$scope:{ctx:t}}}),{c(){e=G("label"),n=xt("Current time"),i=ct(),St(r.$$.fragment),b(e,"for",t[7]),b(e,"class","implicit")},m(a,l){et(a,e,l),_(e,n),et(a,i,l),Et(r,a,l),o=!0},p(a,[l]){const c={};l&16&&(c.knobClass=["PinturaActiveFrameKnob",a[4]&&"PinturaActiveFrameDetailedKnob"].filter(Boolean).join(" ")),l&1&&(c.value=a[0]),l&4&&(c.onchange=a[2]),l&8&&(c.onrelease=a[3]),l&32&&(c.setValue=a[5]),l&2&&(c.step=a[1]),l&576&&(c.$$scope={dirty:l,ctx:a}),r.$set(c)},i(a){o||(K(r.$$.fragment,a),o=!0)},o(a){Y(r.$$.fragment,a),o=!1},d(a){a&&W(e),a&&W(i),Pt(r,a)}}}function wa(t,e,n){let i,{offset:r}=e,{duration:o}=e,{precision:a}=e,{onchange:l}=e,{onrelease:c}=e,{enableDetailIndicator:s=!0}=e,{beforeSetActiveFrame:u=void 0}=e;const f=`active_frame_${Cr()}`;return t.$$set=g=>{"offset"in g&&n(0,r=g.offset),"duration"in g&&n(8,o=g.duration),"precision"in g&&n(1,a=g.precision),"onchange"in g&&n(2,l=g.onchange),"onrelease"in g&&n(3,c=g.onrelease),"enableDetailIndicator"in g&&n(4,s=g.enableDetailIndicator),"beforeSetActiveFrame"in g&&n(5,u=g.beforeSetActiveFrame)},t.$$.update=()=>{t.$$.dirty&257&&n(6,i=fn(r*o))},[r,a,l,c,s,u,i,f,o]}class xa extends _t{constructor(e){super(),zt(this,e,wa,ya,Bt,{offset:0,duration:8,precision:1,onchange:2,onrelease:3,enableDetailIndicator:4,beforeSetActiveFrame:5})}}function lr(t){let e,n;return e=new da({props:{video:t[22],videoSize:t[21],cropAspectRatio:t[17],ranges:t[13],pixelRatio:t[23],frameBackgroundColor:[0,0,0],onchange:t[94]}}),{c(){St(e.$$.fragment)},m(i,r){Et(e,i,r),n=!0},p(i,r){const o={};r[0]&4194304&&(o.video=i[22]),r[0]&2097152&&(o.videoSize=i[21]),r[0]&131072&&(o.cropAspectRatio=i[17]),r[0]&8192&&(o.ranges=i[13]),r[0]&8388608&&(o.pixelRatio=i[23]),r[0]&2048&&(o.onchange=i[94]),e.$set(o)},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){Pt(e,i)}}}function cr(t){let e,n;return e=new sa({props:{locale:t[7],ranges:t[13],minSize:t[15],maxSize:t[14],precision:kr,enableRemoveButton:t[4],onchange:t[95],ondragrange:t[96],onrelease:t[97]}}),{c(){St(e.$$.fragment)},m(i,r){Et(e,i,r),n=!0},p(i,r){const o={};r[0]&128&&(o.locale=i[7]),r[0]&8192&&(o.ranges=i[13]),r[0]&32768&&(o.minSize=i[15]),r[0]&16384&&(o.maxSize=i[14]),r[0]&16&&(o.enableRemoveButton=i[4]),r[0]&32&&(o.ondragrange=i[96]),e.$set(o)},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){Pt(e,i)}}}function Ma(t){let e,n,i,r,o,a,l,c,s,u,f,g;o=new va({props:{duration:t[18]}}),o.$on("measure",t[93]);let m=t[3]&&lr(t),h=t[3]&&t[2]&&cr(t);return s=new xa({props:{offset:t[16],duration:t[18],precision:kr,onchange:t[46],onrelease:t[47],enableDetailIndicator:t[3],beforeSetActiveFrame:t[98]}}),{c(){e=G("div"),n=G("div"),i=G("div"),r=ct(),St(o.$$.fragment),a=ct(),m&&m.c(),l=ct(),h&&h.c(),c=ct(),St(s.$$.fragment),b(i,"class","PinturaTrimControls"),b(n,"class","PinturaVideoTrimmer"),b(e,"slot","footer"),ht(e,"transform",t[19])},m(y,w){et(y,e,w),_(e,n),_(n,i),t[92](i),_(n,r),Et(o,n,null),_(n,a),m&&m.m(n,null),_(n,l),h&&h.m(n,null),_(n,c),Et(s,n,null),u=!0,f||(g=[vt(n,"measure",t[99]),Nt(t[26].call(null,n,{observePosition:!0})),vt(e,"measure",t[100]),Nt(t[26].call(null,e,{observePosition:!0}))],f=!0)},p(y,w){const E={};w[0]&262144&&(E.duration=y[18]),o.$set(E),y[3]?m?(m.p(y,w),w[0]&8&&K(m,1)):(m=lr(y),m.c(),K(m,1),m.m(n,l)):m&&(le(),Y(m,1,1,()=>{m=null}),ce()),y[3]&&y[2]?h?(h.p(y,w),w[0]&12&&K(h,1)):(h=cr(y),h.c(),K(h,1),h.m(n,c)):h&&(le(),Y(h,1,1,()=>{h=null}),ce());const S={};w[0]&65536&&(S.offset=y[16]),w[0]&262144&&(S.duration=y[18]),w[0]&8&&(S.enableDetailIndicator=y[3]),w[0]&1310784&&(S.beforeSetActiveFrame=y[98]),s.$set(S),w[0]&524288&&ht(e,"transform",y[19])},i(y){u||(K(o.$$.fragment,y),K(m),K(h),K(s.$$.fragment,y),u=!0)},o(y){Y(o.$$.fragment,y),Y(m),Y(h),Y(s.$$.fragment,y),u=!1},d(y){y&&W(e),t[92](null),Pt(o),m&&m.d(),h&&h.d(),Pt(s),f=!1,Mt(g)}}}function Ea(t){let e,n;return e=new Ko({props:{$$slots:{footer:[Ma]},$$scope:{ctx:t}}}),e.$on("measure",t[101]),{c(){St(e.$$.fragment)},m(i,r){Et(e,i,r),n=!0},p(i,r){const o={};r[0]&16777212|r[4]&1&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){Pt(e,i)}}}const kr=1e-5,an=.005;function Pa(t,e,n){let i,r,o,a,l,c,s,u,f,g,m,h,y,w,E,S,P,U,x,T,j,A,ot,N,B,J,ut,at,Q,X,rt=$t,$=()=>(rt(),rt=Ne(Tt,d=>n(81,X=d)),Tt),L,F,z,R=$t,k=()=>(R(),R=Ne(p,d=>n(84,z=d)),p),I,H,D,Z,nt,pt,dt,gt,wt,O,q,Lt,Dt;t.$$.on_destroy.push(()=>rt()),t.$$.on_destroy.push(()=>R());const Yt=!0,Jt="trim";let{isActive:Tt}=e;$();let{isActiveFraction:p}=e;k();let{stores:M}=e,{trimEnableSplit:C=!0}=e,{trimEnableMediaClipper:st=!0}=e,{trimEnableFramePreview:V=!0}=e,{trimEnablePlayPauseButton:tt=!0}=e,{trimEnableMuteButton:v=!0}=e,{trimEnableMediaClipperRemoveButton:bt=!0}=e,{trimEnableUpdateCurrentTimeOnTrim:Ct=!1}=e,{trimBeforeSetCurrentTime:Ot=void 0}=e,{trimWillRenderControls:ue=d=>d}=e,{locale:it={}}=e;const Me=ro(),{DynamicComponentTree:Ee}=Rt("components"),vn=Rt("env");lt(t,vn,d=>n(77,N=d));const Ke=Rt("redrawTrigger");lt(t,Ke,d=>n(80,at=d));const Br=Rt("measurable"),{play:Lr,pause:Tr,togglePlayPause:Ar,toggleMute:Fr,isPlaying:bn,isMuted:yn,frameOffset:Pe,framePeekOffset:Se}=Rt("previewcontrols");lt(t,bn,d=>n(79,ut=d)),lt(t,yn,d=>n(78,J=d)),lt(t,Pe,d=>n(16,B=d));const{imagePreview:wn,imageEffects:xn,imageCropRectAspectRatio:Mn,imageSize:Xe,animation:En,pixelRatio:Pn,stageRectBase:Sn,interfaceImages:Ce,mediaDuration:Cn,mediaTrim:de,utilRect:kn,history:ke,imageCropRect:He,imageRotation:Rr,imageFlipX:Ir,imageFlipY:zr,allowPan:_r,allowZoom:Ur,allowZoomControls:jr,mediaMinDuration:Bn,mediaMaxDuration:Ln,allowPlayPause:Nr}=M;lt(t,wn,d=>n(22,Lt=d)),lt(t,xn,d=>n(83,F=d)),lt(t,Mn,d=>n(17,Q=d)),lt(t,Xe,d=>n(21,H=d)),lt(t,En,d=>n(88,dt=d)),lt(t,Pn,d=>n(23,Dt=d)),lt(t,Sn,d=>n(87,pt=d)),lt(t,Ce,d=>n(104,D=d)),lt(t,Cn,d=>n(18,gt=d)),lt(t,de,d=>n(89,wt=d)),lt(t,kn,d=>n(86,nt=d)),lt(t,He,d=>n(103,I=d)),lt(t,Bn,d=>n(91,q=d)),lt(t,Ln,d=>n(90,O=d));let Be,Le,Te,Ae;const Dr=d=>{Se.set(void 0),Ae===void 0&&(Ae=!Lt.paused),Pe.set(d),Tr()},Or=()=>{Ae&&Lr(),Ae=void 0},Vr=d=>{const mt=o.findIndex(([te,Vt])=>d>te&&d<Vt),[ft,At]=o[mt],Ft=[...o],pe=[ft,d-an],he=[d+an,At];Ft.splice(mt,1,pe,he),de.set(Ft),ke.write()},Kr=(d,mt)=>{const ft=[...d].reverse().findIndex(([,At])=>mt>At);return ft===-1?-1:d.length-ft-1},Xr=(d,mt)=>d.findIndex(([ft])=>ft>mt),Hr=d=>{const mt=[...o],ft=o.findIndex(([Ft])=>d<Ft)-1,At=o.length-[...o].reverse().findIndex(([,Ft])=>d>Ft);mt.splice(ft,2,[o[ft][0],o[At][1]]),de.set(mt),ke.write()},Ze=Sr(dt?20:0);lt(t,Ze,d=>n(85,Z=d));let me;const Tn=()=>D.filter(d=>d.id!=="trim"),Zr=(d,mt,{transforms:ft,effects:At})=>{const Ft=me.x,pe=me.y;return d.map((he,te)=>{const{itemRect:Vt,opacity:qe,backgroundColor:Ge,data:Re,dataSize:Ie}=he,$e={x:Ft+Vt.x,y:pe+Vt.y,width:Vt.width,height:Vt.height};let Qe=[0,0,0,0];te===0?Qe=[6,0,6,0]:te===d.length-1&&(Qe=[0,6,0,6]);const ii={x:$e.x+$e.width*.5,y:Math.floor($e.y+$e.height*.5)},oi={width:H.width,height:H.height},ai={x:ft.origin.x,y:ft.origin.y},si={x:ft.translation.x,y:ft.translation.y},li=Math.max(Ie.width/I.width,Ie.height/I.height);return{...At,convolutionMatrix:void 0,id:"trim",backgroundColor:Ge,data:Re,offset:ii,size:oi,mask:$e,maskCornerRadius:Qe,opacity:Math.min(qe,mt),scale:li,origin:ai,translation:si,rotation:ft.rotation}})},An=fo([Tt,He,Xe,Rr,Ir,zr],([d,mt,ft,At,Ft,pe],he)=>{if(!d||!ft)return L;const te=gr(ft),Vt=oe(te),qe=po(ft,mt,At),Ge=oe(qe),Re=$r(Un(Vt),Ge),Ie=Ri(Un(Re));he({origin:Ie,translation:Re,rotation:{x:pe?Math.PI:0,y:Ft?Math.PI:0,z:At}})});lt(t,An,d=>n(82,L=d));let Fe,fe,Wt;function qr(d){jt[d?"unshift":"push"](()=>{fe=d,n(12,fe)})}const Gr=d=>n(10,Te=d.detail),Qr=d=>n(11,Fe=d),Yr=d=>{de.set(d)},Jr=d=>{Ct?Pe.set(d):Se.set(d)},Wr=()=>{Se.set(void 0),ke.write()},ti=d=>Ot?Ot(d*gt,{trim:a})/gt:d,ei=d=>n(9,Le=d.detail),ni=d=>n(8,Be=d.detail);function ri(d){$n.call(this,t,d)}return t.$$set=d=>{"isActive"in d&&$(n(0,Tt=d.isActive)),"isActiveFraction"in d&&k(n(1,p=d.isActiveFraction)),"stores"in d&&n(52,M=d.stores),"trimEnableSplit"in d&&n(53,C=d.trimEnableSplit),"trimEnableMediaClipper"in d&&n(2,st=d.trimEnableMediaClipper),"trimEnableFramePreview"in d&&n(3,V=d.trimEnableFramePreview),"trimEnablePlayPauseButton"in d&&n(54,tt=d.trimEnablePlayPauseButton),"trimEnableMuteButton"in d&&n(55,v=d.trimEnableMuteButton),"trimEnableMediaClipperRemoveButton"in d&&n(4,bt=d.trimEnableMediaClipperRemoveButton),"trimEnableUpdateCurrentTimeOnTrim"in d&&n(5,Ct=d.trimEnableUpdateCurrentTimeOnTrim),"trimBeforeSetCurrentTime"in d&&n(6,Ot=d.trimBeforeSetCurrentTime),"trimWillRenderControls"in d&&n(56,ue=d.trimWillRenderControls),"locale"in d&&n(7,it=d.locale)},t.$$.update=()=>{if(t.$$.dirty[2]&524288&&_r.set(X),t.$$.dirty[2]&524288&&Ur.set(X),t.$$.dirty[2]&524288&&jr.set(X),t.$$.dirty[2]&524288&&X&&Nr.set(!0),t.$$.dirty[0]&262144|t.$$.dirty[2]&536870912&&n(15,i=q/gt),t.$$.dirty[0]&262144|t.$$.dirty[2]&268435456&&n(14,r=Math.min(gt,O)/gt),t.$$.dirty[0]&16384|t.$$.dirty[2]&134217728&&n(13,o=wt||[[0,r]]),t.$$.dirty[0]&270336&&n(20,a=o.map(([d,mt])=>[d*gt,mt*gt])),t.$$.dirty[0]&8192&&n(76,l=o.reduce((d,[mt,ft])=>d+(ft-mt),0)),t.$$.dirty[0]&32768|t.$$.dirty[2]&16384&&n(73,c=l-i),t.$$.dirty[0]&16384|t.$$.dirty[2]&16384&&n(67,s=r-l),t.$$.dirty[0]&8192&&n(72,u=o[0][0]),t.$$.dirty[0]&8192&&n(71,f=o[o.length-1][1]),t.$$.dirty[0]&65536&&n(75,g=It(B,6)),t.$$.dirty[0]&8192&&n(69,m=o.map(([d,mt])=>[It(d,6),It(mt,6)])),t.$$.dirty[2]&8320&&n(74,h=m.findIndex(([d,mt])=>g>d&&g<mt)),t.$$.dirty[2]&4096&&n(63,y=h>-1),t.$$.dirty[2]&2&&n(61,w=!y),t.$$.dirty[2]&2048&&n(62,E=c<an*2),t.$$.dirty[0]&65536|t.$$.dirty[2]&1536&&n(66,S=B<=u||B>=f),t.$$.dirty[0]&73728|t.$$.dirty[1]&1073741824&&n(68,P=w?Kr(o,B):-1),t.$$.dirty[0]&73728|t.$$.dirty[1]&1073741824&&n(70,U=w?Xr(o,B):-1),t.$$.dirty[1]&1073741824|t.$$.dirty[2]&480&&n(65,x=w&&P>=0&&U>=0&&m[U][0]-m[P][1]<s),t.$$.dirty[2]&24&&n(60,T=S||!x),t.$$.dirty[2]&67633152&&dt&&Ze.set(X?0:20),t.$$.dirty[2]&8388608&&n(19,j=Z?`translateY(${Z}px)`:void 0),t.$$.dirty[0]&1792|t.$$.dirty[2]&58720256&&nt&&pt&&Be&&Le&&Te&&n(57,me={x:pt.x-nt.x+Le.x,y:pt.y-nt.y+Be.y+Z+Te.height}),t.$$.dirty[0]&2048|t.$$.dirty[1]&67108864|t.$$.dirty[2]&7864320)if(Fe&&me&&X){const d=[...Tn(),...Zr(Fe,z,{effects:F,transforms:L})];Ce.set(d)}else{const d=Tn();Ce.set(d)}t.$$.dirty[0]&131072|t.$$.dirty[2]&524292&&n(64,A=X?Q:A||void 0),t.$$.dirty[0]&65664|t.$$.dirty[1]&1673527296|t.$$.dirty[2]&491523&&n(59,ot=it&&at&&ue([tt&&["Button","play-pause",{onclick:Ar,label:ut?it.trimLabelPause:it.trimLabelPlay,icon:ut?it.trimIconButtonPause:it.trimIconButtonPlay,class:"PinturaButtonPlay",hideLabel:!0}],v&&["Button","mute-unmute",{onclick:Fr,label:J?it.trimLabelUnmute:it.trimLabelMute,icon:J?it.trimIconButtonUnmute:it.trimIconButtonMute,class:"PinturaButtonMute",hideLabel:!0}],C&&y&&["Button","split",{disabled:E,onclick:()=>Vr(B),label:it.trimLabelSplit,icon:it.trimIconButtonSplit,class:"PinturaButtonMerge"}],C&&w&&["Button","merge",{disabled:T,onclick:()=>Hr(B),label:it.trimLabelMerge,icon:it.trimIconButtonMerge,class:"PinturaButtonSplit"}]].filter(Boolean),{...N},()=>Ke.set({}))),t.$$.dirty[0]&4096|t.$$.dirty[1]&402653184&&fe&&!Wt&&n(58,Wt=new Ee({target:fe,props:{items:ot},context:Me})),t.$$.dirty[1]&402653184&&Wt&&ot&&n(58,Wt.items=ot,Wt)},[Tt,p,st,V,bt,Ct,Ot,it,Be,Le,Te,Fe,fe,o,r,i,B,Q,gt,j,a,H,Lt,Dt,vn,Ke,Br,bn,yn,Pe,Se,wn,xn,Mn,Xe,En,Pn,Sn,Ce,Cn,de,kn,ke,He,Bn,Ln,Dr,Or,Ze,An,Yt,Jt,M,C,tt,v,ue,me,Wt,ot,T,w,E,y,A,x,S,s,P,m,U,f,u,c,h,g,l,N,J,ut,at,X,L,F,z,Z,nt,pt,dt,wt,O,q,qr,Gr,Qr,Yr,Jr,Wr,ti,ei,ni,ri]}class Sa extends _t{constructor(e){super(),zt(this,e,Pa,Ea,Bt,{external:50,name:51,isActive:0,isActiveFraction:1,stores:52,trimEnableSplit:53,trimEnableMediaClipper:2,trimEnableFramePreview:3,trimEnablePlayPauseButton:54,trimEnableMuteButton:55,trimEnableMediaClipperRemoveButton:4,trimEnableUpdateCurrentTimeOnTrim:5,trimBeforeSetCurrentTime:6,trimWillRenderControls:56,locale:7},null,[-1,-1,-1,-1,-1])}get external(){return this.$$.ctx[50]}get name(){return this.$$.ctx[51]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),yt()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),yt()}get stores(){return this.$$.ctx[52]}set stores(e){this.$$set({stores:e}),yt()}get trimEnableSplit(){return this.$$.ctx[53]}set trimEnableSplit(e){this.$$set({trimEnableSplit:e}),yt()}get trimEnableMediaClipper(){return this.$$.ctx[2]}set trimEnableMediaClipper(e){this.$$set({trimEnableMediaClipper:e}),yt()}get trimEnableFramePreview(){return this.$$.ctx[3]}set trimEnableFramePreview(e){this.$$set({trimEnableFramePreview:e}),yt()}get trimEnablePlayPauseButton(){return this.$$.ctx[54]}set trimEnablePlayPauseButton(e){this.$$set({trimEnablePlayPauseButton:e}),yt()}get trimEnableMuteButton(){return this.$$.ctx[55]}set trimEnableMuteButton(e){this.$$set({trimEnableMuteButton:e}),yt()}get trimEnableMediaClipperRemoveButton(){return this.$$.ctx[4]}set trimEnableMediaClipperRemoveButton(e){this.$$set({trimEnableMediaClipperRemoveButton:e}),yt()}get trimEnableUpdateCurrentTimeOnTrim(){return this.$$.ctx[5]}set trimEnableUpdateCurrentTimeOnTrim(e){this.$$set({trimEnableUpdateCurrentTimeOnTrim:e}),yt()}get trimBeforeSetCurrentTime(){return this.$$.ctx[6]}set trimBeforeSetCurrentTime(e){this.$$set({trimBeforeSetCurrentTime:e}),yt()}get trimWillRenderControls(){return this.$$.ctx[56]}set trimWillRenderControls(e){this.$$set({trimWillRenderControls:e}),yt()}get locale(){return this.$$.ctx[7]}set locale(e){this.$$set({locale:e}),yt()}}const Ca={util:["trim",Sa,({src:t})=>t&&Mo(t)]},ka={trimLabel:"Trim",trimIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d=" M1 3 v18 M5 3 v2 M9 3 v2 M5 18 v2 M9 18 v2 M1 3 h12 M1 6 h10 M1 18 h9 M1 21 h8 M14 0 l-4 24 M18 3 h5 M17.5 6 h6 M15.5 18 h7 M15 21 h8 M19 3 v2 M15 18 v2 M19 18 v2 M23 3 v18"/></g>',trimLabelPlay:"Play",trimLabelPause:"Pause",trimLabelMute:"Mute",trimLabelUnmute:"Unmute",trimLabelSplit:"Split",trimLabelMerge:"Merge",trimLabelRemove:"Remove",trimIconButtonMute:'<g stroke-width=".125em" stroke="currentColor"><polygon fill="currentColor" points="2 16 2 8 8 8 15 1 15 23 8 16"/><path d="M19.3781212,15.2166107 C20.3621122,14.4879168 21,13.3184517 21,12 C21,10.6815483 20.3621122,9.51208318 19.3781212,8.78338927"/></g>',trimIconButtonUnmute:'<g stroke-width=".125em" stroke="currentColor"><polygon fill="currentColor" points="2 16 2 8 3 8 15 20 15 23 8 16"/><polygon fill="currentColor" points="8 8 15 1 15 15"/><line x1="1" y1="1" x2="23" y2="23"/></g>',trimIconButtonPlay:'<polygon fill="currentColor" points="7 3, 21 12, 7 21"/>',trimIconButtonPause:'<g fill="currentColor"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></g>',trimIconButtonSplit:`<g stroke="currentColor" stroke-width=".125em">
    <path d="M12 4 V20"/>
    <path fill="currentColor" d="M6 8 L6 16 L2 12 Z M18 8 L22 12 L18 16 Z"/>
    </g>`,trimIconButtonMerge:`<g stroke="currentColor" stroke-width=".125em">
    <path d="M1 4 V20 M23 4 V20"/>
    <path fill="currentColor" d="M6 8 L10 12 L6 16 Z M18 8 L14 12 L18 16 Z"/>
    </g>`,unitSeconds:["second","seconds"],statusImageLoadNone:"Waiting for media",statusImageLoadMinSize:"Minimum media size is {minWidth} &times; {minHeight}",statusImageLoadMinDuration:"Minimum video duration is {minDuration} {seconds}",statusImageLoadError:"Error loading media",statusImageLoadPrepare:"Preparing media&hellip;",statusImageLoadBusy:"Loading media&hellip;",statusImageUploadError:"Error uploading media",statusImageUploadBusy:"Uploading media&hellip;",statusImageProcessError:"Error processing media",statusImageProcessBusy:"Processing media&hellip;",cropLabelCropBoundaryEdge:"Edge of media"};typeof window<"u"&&(t=>{if(t&&t._lq5xdpj)return;const[e,n,i]=[[99,111,110,115,111,108,101],[108,111,103],[84,104,105,115,32,118,101,114,115,105,111,110,32,111,102,32,116,104,101,32,80,105,110,116,117,114,97,32,86,105,100,101,111,32,69,120,116,101,110,115,105,111,110,32,105,115,32,102,111,114,32,116,101,115,116,105,110,103,32,112,117,114,112,111,115,101,115,32,111,110,108,121,46,32,86,105,115,105,116,32,104,116,116,112,115,58,47,47,112,113,105,110,97,46,110,108,47,112,105,110,116,117,114,97,32,116,111,32,112,117,114,99,104,97,115,101,32,97,32,108,105,99,101,110,115,101,46,32,86,105,115,105,116,32,104,116,116,112,115,58,47,47,112,113,105,110,97,46,110,108,47,112,105,110,116,117,114,97,47,99,104,97,116,32,105,102,32,121,111,117,32,104,97,118,101,32,97,110,121,32,113,117,101,115,116,105,111,110,115,46]].map(r=>r.map(o=>String.fromCharCode(o)).join(""));!t||!t[e]||t[e][n](i)})(window);mi(Ca);const Ba={name:"ExampleVideo",components:{PinturaEditor:ci},methods:{handleLoad:function(t){console.log("load",t.detail)},handleProcess:function(t){console.log("process",t.detail),this.result=URL.createObjectURL(t.detail.dest)}},data(){return{props:ui({util:"trim",locale:{...ka},imageWriter:di({targetSize:{width:400}},[fi(),Co({encoder:Ro({imageStateToCanvas:pi})})])}),src:"video.mp4",result:void 0}}},La={style:{height:"70vh"}},Ta={key:0},Aa=["src"];function Fa(t,e,n,i,r,o){const a=bi("PinturaEditor");return In(),Fn(yi,null,[e[2]||(e[2]=ge("h2",null,"Example Video",-1)),e[3]||(e[3]=ge("p",null,[Rn(" Please note that the "),ge("a",{href:"https://pqina.nl/pintura/video-editor/"},"Pintura video editor extension"),Rn(" is not included in the core product package. ")],-1)),ge("div",La,[gi(a,vi(r.props,{src:r.src,"onPintura:load":e[0]||(e[0]=l=>o.handleLoad(l)),"onPintura:process":e[1]||(e[1]=l=>o.handleProcess(l))}),null,16,["src"])]),r.result?(In(),Fn("p",Ta,[ge("video",{src:r.result,controls:""},null,8,Aa)])):$i("",!0)],64)}const _a=hi(Ba,[["render",Fa]]);export{_a as default};
